<div class="space-y-6  ">

<mat-card style="padding: 1rem; display: flex; flex-direction: column; gap: 1rem;">

  <p class="font-sans font-medium text-xl">Visualize how a filter is split into M polyphase components to save computation.</p>

  <div style="display: flex; gap: 2rem; flex-wrap: wrap;">

    <!-- Decimation Factor -->
    <div>
      <mat-label>Decimation Factor (M): {{ M_poly }}</mat-label>
      <mat-slider min="2" max="8" step="1" thumbLabel
        [(ngModel)]="M_poly" (input)="updatePolyphase()" style="width: 200px;">
        <input matSliderThumb [(ngModel)]="M_poly" (input)="updatePolyphase()"/>
      </mat-slider>
    </div>

    <!-- Filter Length -->
    <div>
      <mat-label>Filter Length (Taps): {{ N_poly }}</mat-label>
      <mat-slider min="16" max="128" step="1" thumbLabel
        [(ngModel)]="N_poly" (input)="updatePolyphase()" style="width: 200px;">
        <input matSliderThumb [(ngModel)]="N_poly" (input)="updatePolyphase()"/>
      </mat-slider>
    </div>

  </div>

  <!-- Chart -->
  <div style="width: 100%; height:50%;">
    <canvas baseChart
      [data]="polyChartData"
      [type]="polyChartType"
      [options]="polyChartOptions">
    </canvas>
  </div>

  <!-- Computational Cost -->
  <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
    <mat-card class="p-2">
      <p>Direct Ops</p>
      <h3>{{ opsDirect | number }}</h3>
    </mat-card>
    <mat-card class="p-2">
      <p>Polyphase Ops</p>
      <h3>{{ opsPoly | number:'1.0-0' }}</h3>
    </mat-card>
    <mat-card class="p-2">
      <p>Speedup Factor</p>
      <h3>{{ speedup }}x</h3>
    </mat-card>
  </div>

 

</mat-card>

 <!-- Explanation -->
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>ðŸš€ Why is it faster?</mat-panel-title>
    </mat-expansion-panel-header>
    <p>
      Instead of calculating convolution for every sample and discarding M-1 of them (Direct Downsampling), 
      we only calculate the convolution for the samples we actually keep!
    </p>
  </mat-expansion-panel>



</div>